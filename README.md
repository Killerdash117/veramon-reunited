<div align="center">

# ğŸŒŸ Veramon Reunited ğŸŒŸ

<img src="https://i.imgur.com/EMNMEsp.jpeg" alt="Veramon Reunited" width="500"/>

[![License](https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square)](https://github.com/killerdash117/veramon-reunited/blob/master/LICENSE)
[![Version](https://img.shields.io/badge/Version-v0.33.0-brightgreen.svg?style=flat-square)](https://github.com/killerdash117/veramon-reunited/releases)
[![Discord.py](https://img.shields.io/badge/Discord.py-2.3.0-blue.svg?style=flat-square)](https://github.com/Rapptz/discord.py)
[![Status](https://img.shields.io/badge/Status-In%20Development-orange.svg?style=flat-square)](https://github.com/killerdash117/veramon-reunited)
[![Tests](https://img.shields.io/badge/Tests-Passing-brightgreen.svg?style=flat-square)](https://github.com/killerdash117/veramon-reunited/actions)
[![Code Style](https://img.shields.io/badge/Code%20Style-PEP8-blueviolet.svg?style=flat-square)](https://www.python.org/dev/peps/pep-0008/)

**A comprehensive Discord bot for monster-catching adventures in your server**

[Features](#-features) â€¢ [Commands](#-commands) â€¢ [Setup Guide](#-setup-guide) â€¢ [Getting Started](#-getting-started) â€¢ [Project Structure](#-project-structure) â€¢ [Contributing](#-contributing) â€¢ [Troubleshooting](#-troubleshooting)

</div>

---

<details open>
<summary><h2> ğŸ® Features</h2></summary>

<details open>
<summary><h3> ğŸ¦– Creature System</h3></summary>

- **300+ Unique Veramons** with detailed stats, types, and abilities
- **Shiny Variants** with distinctive appearances and enhanced stats
- **Multiple Evolution Paths** based on various conditions
- **Special Forms** that modify appearances and abilities
- **Type Chart** with strengths and weaknesses
- **Abilities System** with over 150 unique effects
- **Passive Skills** that provide bonuses in and out of battle
- **Customizable Nicknames** and **Favorites** system

</details>

<details open>
<summary><h3> âš”ï¸ Battle System</h3></summary>

- **Turn-Based Combat** with strategic depth
- **Type Effectiveness** system with multipliers
- **PvP Battles** against other trainers
- **PvE Challenges** against NPC trainers of varying difficulty
- **Multi-Battle Support** for 2v2 team battles
- **Move Pool** with over 200 unique moves
- **Battle Items** that provide tactical advantages
- **Status Effects** including temporary and persistent conditions
- **Field Conditions** that affect battle dynamics
- **Weather System** influencing move effectiveness
- **Critical Hit System** with modifiers and special moves
- **Battle Logs** for tracking match history and statistics
- **Battle Rankings** for competitive players
- **Battle Rewards** including XP, tokens, and rare items
- **Enhanced Battle UI** with interactive controls

</details>

<details open>
<summary><h3> ğŸ”„ Trading System</h3></summary>

- **Secure Player-to-Player Trading** with confirmation safeguards
- **Veramon Trading** with preview of stats and abilities
- **Item Exchange** for consumables and evolution items
- **Token Trading** with currency verification
- **Trade History** for tracking past exchanges
- **Trade Notifications** for pending and completed trades
- **Interactive UI** for adding/removing items
- **Trade Expiration** system to prevent abandoned trades
- **Veramon Ownership Transfer** with database verification
- **Recent Trades Feed** for public trade activity

</details>

<details open>
<summary><h3> ğŸŒ³ Exploration System</h3></summary>

- **10+ Unique Biomes** each with different Veramon spawns
- **Weather System** affecting spawn rates and types
- **Day/Night Cycle** with time-specific encounters
- **Special Areas** unlocked through progression
- **Seasonal Events** with limited-time creatures
- **Rarity System** from common to mythical encounters
- **Encounter Boosts** through items and upgrades
- **Location-Based Quests** for additional rewards

</details>

<details>
<summary><h3> ğŸ‘¥ Social Features</h3></summary>

- **Trading System** for exchanging Veramon and items
- **Guild System** for team-based gameplay
- **Faction Wars** with territory control mechanics
- **Leaderboards** tracking various achievements
- **Party System** for coordinated exploration
- **Tournaments** with brackets and prizes
- **Friend System** with benefits for playing together
- **Profile Customization** with themes and backgrounds
- **Achievement Display** to showcase accomplishments

</details>

<details>
<summary><h3> ğŸ’¸ Economy & Progression</h3></summary>

- **Token Economy** with multiple ways to earn and spend
- **Item Shop** with rotating inventory
- **VIP Shop** with exclusive items for supporters
- **Level System** for trainers with increasing benefits
- **Quest System** with daily, weekly, and special tasks
- **Achievement System** with milestone rewards
- **Collection Completion** bonuses and tracking
- **Seasonal Events** with exclusive rewards
- **Battle Pass** system with free and premium tiers

</details>

<details>
<summary><h3> ğŸ› ï¸ Administrative Tools</h3></summary>

- **Setup Wizard** for easy server configuration
- **Customizable Settings** for spawn rates, rewards, and more
- **Moderation Commands** for managing players and events
- **Statistics Dashboard** for server activity monitoring
- **Role Integration** with Discord server roles
- **Channel Configuration** for dedicated gameplay areas
- **Announcement System** for server-wide notifications
- **Backup System** for database management
- **Update Notifications** for new features and changes

</details>

<details>
<summary><h3> ğŸ“ˆ Trading System</h3></summary>

- **Direct Player Trading** with security verification
- **Enhanced Trading UI** with side-by-side comparison views
- **Trade History** for tracking past exchanges
- **Item and Veramon Trading** with multi-select capability
- **Trade Confirmation** requiring both parties' approval
- **Visual Trade Verification** showing exactly what's being traded
- **Scam Protection** with multiple safeguards
- **Recent Trades Log** viewable through commands
- **Trade Metrics** tracking popular trades and values

</details>

<details>
<summary><h3> ğŸ¨ UI & Theming System</h3></summary>

- **Customizable Themes** with different color schemes and styles
- **Personal Theme Settings** saved per user
- **Interactive UI Components** with modern Discord features
- **Carousel Views** for browsing collections and items
- **Enhanced Selection Menus** with category support
- **Theme Preview System** to test before applying
- **Styled Embeds** with consistent visual language
- **Visual State Changes** for battles and special events
- **Color Customization** for indicators and highlights
- **Accessibility Options** with high-contrast themes
- **UI Integration** with all major game systems

</details>

<details>
<summary><h3> ğŸŒ Accessibility Features</h3></summary>

- **Comprehensive Accessibility Settings** - Complete settings panel with multiple options
- **Text Size Options** - Small, Medium, Large, and Extra Large text for all UI elements
- **Color Vision Deficiency Support**:
  - Deuteranopia mode (green-blind friendly)
  - Protanopia mode (red-blind friendly)
  - Tritanopia mode (blue-blind friendly)
  - Monochrome/grayscale mode
- **High Contrast Mode** - Enhanced visibility with maximized contrast
- **Visual Update Controls** - Configure frequency of UI updates based on user preference
- **Simplified UI Mode** - Cleaner layouts with reduced visual complexity
- **Extended Interaction Timeouts** - Longer response windows for battles and trades
- **Extra Button Spacing** - Improved motor accessibility for button interactions
- **Screen Reader Support** - Enhanced descriptions and alt text for images
- **Shortcut Buttons Panel** - Quick access to common accessibility settings
- **Command Aliases** - Simple text commands for quick accessibility adjustments
- **Theme Integration** - Accessibility settings applied consistently across all UI elements
- **Persistence** - Settings saved per user across sessions

Access these features with the `/accessibility` command or use the `!shortcuts` command for quick access to essential options.

</details>

</details>

---

<details>
<summary><h2> ğŸ“š Commands</h2></summary>

<details>
<summary><h3> Getting Started</h3></summary>

| Command | Description | Example |
|---------|-------------|---------|
| `/help` | View available commands | `/help` |
| `/start` | Begin your Veramon adventure | `/start` |
| `/tutorial` | Interactive guide to gameplay | `/tutorial` |
| `/daily` | Claim daily rewards | `/daily` |
| `/profile` | View your trainer profile | `/profile` |
| `/collection` | View your Veramon collection | `/collection` |

</details>

<details>
<summary><h3> Exploration</h3></summary>

| Command | Description | Example |
|---------|-------------|---------|
| `/explore` | Explore for wild Veramon | `/explore` |
| `/explore [biome]` | Explore a specific biome | `/explore forest` |
| `/catch [veramon_id]` | Attempt to catch a wild Veramon | `/catch w12345` |
| `/biomes` | View available biomes | `/biomes` |
| `/weather` | Check current weather conditions | `/weather` |

</details>

<details>
<summary><h3> Battle System</h3></summary>

| Command | Description | Example |
|---------|-------------|---------|
| `/battle_pve [difficulty]` | Battle an NPC trainer | `/battle_pve normal` |
| `/battle_pvp [player]` | Challenge another player | `/battle_pvp @Username` |
| `/battle_multi [type] [team_size]` | Start a multi-player battle | `/battle_multi 2v2 2` |
| `/move [move_id]` | Use a move in battle | `/move tackle` |
| `/switch [veramon_id]` | Switch active Veramon in battle | `/switch v12345` |

</details>

<details>
<summary><h3> Economy & Shopping</h3></summary>

| Command | Description | Example |
|---------|-------------|---------|
| `/balance` | Check your token balance | `/balance` |
| `/shop` | Browse the item shop | `/shop` |
| `/shop [category]` | Browse a specific shop category | `/shop boosts` |
| `/shop_buy [item_id] [quantity]` | Purchase an item | `/shop_buy token_magnet 1` |
| `/inventory` | View your items | `/inventory` |
| `/use [item_id] [target]` | Use an item | `/use potion v12345` |

</details>

<details>
<summary><h3> Social & Guilds</h3></summary>

| Command | Description | Example |
|---------|-------------|---------|
| `/guild_create [name]` | Create a new guild | `/guild_create PokeExplorers` |
| `/guild_join [guild_id]` | Join an existing guild | `/guild_join g12345` |
| `/guild_leave` | Leave your current guild | `/guild_leave` |
| `/guild_info [guild_id]` | View guild details | `/guild_info g12345` |
| `/guild_invite [player]` | Invite a player to your guild | `/guild_invite @Username` |
| `/leaderboard [category]` | View leaderboards | `/leaderboard catches` |

</details>

<details>
<summary><h3> Faction System</h3></summary>

| Command | Description | Example |
|---------|-------------|---------|
| `/faction_join [faction_name]` | Request to join a faction | `/faction_join Mystic` |
| `/faction_info [faction_name]` | View faction details | `/faction_info Mystic` |
| `/faction_leave` | Leave your current faction | `/faction_leave` |
| `/faction_upgrade [upgrade_name]` | Purchase faction upgrades | `/faction_upgrade token_economy` |
| `/faction_buff [buff_type]` | Activate faction-wide buffs | `/faction_buff token` |
| `/faction_war [target_faction]` | Declare war on another faction | `/faction_war Valor` |
| `/faction_shop` | Browse faction-specific shop | `/faction_shop` |
| `/faction_level` | Check faction level and progress | `/faction_level` |
| `/faction_contribute [amount]` | Donate tokens to faction treasury | `/faction_contribute 1000` |

</details>

<details>
<summary><h3> VIP Commands</h3></summary>

| Command | Description | Example |
|---------|-------------|---------|
| `/vip_shop` | Browse VIP-exclusive shop | `/vip_shop` |
| `/vip_shop_buy [item_id] [quantity]` | Purchase from VIP shop | `/vip_shop_buy premium_token_pack 1` |
| `/daily_vip` | Claim enhanced VIP daily rewards | `/daily_vip` |
| `/nickname_color [color]` | Change nickname color in bot embeds | `/nickname_color #FF5500` |

</details>

<details>
<summary><h3> Moderation Commands</h3></summary>

| Command | Description | Example |
|---------|-------------|---------|
| `/mod_trade_view [trade_id]` | View details of any trade | `/mod_trade_view t12345` |
| `/mod_battle_view [battle_id]` | View details of any battle | `/mod_battle_view b12345` |
| `/mod_mute [user] [duration]` | Temporarily mute a user from bot commands | `/mod_mute @Username 1h` |
| `/mod_unmute [user]` | Remove a mute from a user | `/mod_unmute @Username` |
| `/mod_announce [message]` | Send an announcement to all players | `/mod_announce Server event starting soon!` |

</details>

<details>
<summary><h3> Administration Commands</h3></summary>

| Command | Description | Example |
|---------|-------------|---------|
| `/admin_setup` | Run the interactive setup wizard | `/admin_setup` |
| `/admin_config [category]` | Configure bot settings | `/admin_config spawns` |
| `/admin_roles` | Configure role permissions | `/admin_roles` |
| `/admin_channels` | Configure channel settings | `/admin_channels` |
| `/admin_spawn` | Force spawn a Veramon | `/admin_spawn` |
| `/admin_event [event_id] [action]` | Manage server events | `/admin_event summer_fest start` |
| `/admin_reset [player]` | Reset a player's progress | `/admin_reset @Username` |
| `/admin_backup` | Create a database backup | `/admin_backup` |
| `/admin_restore [backup_id]` | Restore from a backup | `/admin_restore backup_20250415` |

</details>

</details>

---

<details>
<summary><h2> ğŸ“š Setup Guide</h2></summary>

<details>
<summary><h3> Installation for Bot Developers</h3></summary>

1. **Clone the Repository**
   ```bash
   git clone https://github.com/killerdash117/veramon-reunited.git
   cd veramon-reunited
   ```

2. **Set Up Environment**
   ```bash
   # Create and activate virtual environment
   python -m venv venv
   
   # Windows
   venv\Scripts\activate
   
   # Linux/macOS
   source venv/bin/activate
   
   # Install dependencies
   pip install -r requirements.txt
   ```

3. **Configure Environment Variables**
   Create a `.env` file in the root directory with the following:
   ```
   BOT_TOKEN=your_discord_bot_token_here
   ```

4. **Run the Bot**
   ```bash
   python src/main.py
   ```

5. **Get Bot Token**
   - Go to [Discord Developer Portal](https://discord.com/developers/applications)
   - Create a new application and add a bot
   - Enable necessary intents (Message Content, Server Members, Presence)
   - Copy the token to your `.env` file

</details>

<details>
<summary><h3> Adding to Your Server</h3></summary>

1. **[Click Here to Invite the Bot](https://discord.com/)**
2. Select the server you wish to add Veramon Reunited to
3. Authorize the required permissions
4. The bot will join your server ready to use!

</details>

<details>
<summary><h3> Quick Setup</h3></summary>

1. Run the interactive setup wizard with `/setup`
2. Follow the step-by-step prompts to configure:
   - General settings (bot prefix, status, timezone)
   - Game features (battles, trading, quests, events)
   - Economy settings (token rewards, starting balances)
   - Spawn settings (rates, rarities, biomes)
   - Channel configurations (for spawns, announcements, logs)
   - Role assignments (admin, moderator, VIP)
   - Security settings (rate limits, cooldowns)
3. Your configuration changes are saved automatically

</details>

<details>
<summary><h3> Manual Setup</h3></summary>

If you prefer a more hands-on approach, you can also set up the bot manually:

1. Create these recommended roles (optional but encouraged):
   - **Veramon Trainer** - For regular users
   - **VIP** - For premium users or supporters
   - **Mod** - For server moderators
   - **Admin** - For server administrators
   - **Dev** - For bot developers
2. Start with basic commands:
   - `/help` - View available commands
   - `/start` - Begin your adventure
   - `/explore` - Find your first Veramon

</details>

<details>
<summary><h3> Server Configuration</h3></summary>

Server administrators can customize the bot experience:

1. Use `/admin_config` to adjust:
   - Spawn rates and catch difficulties
   - Economy balance
   - Feature availability
   - Channel restrictions

2. Set up dedicated channels (recommended):
   - `#veramon-catching` - For exploration and catching
   - `#veramon-battles` - For trainer battles
   - `#veramon-trading` - For trading marketplace
   - `#veramon-announcements` - For bot announcements

</details>

</details>

---

<details>
<summary><h2> ğŸš€ Getting Started</h2></summary>

<details>
<summary><h3> Quick Start Guide</h3></summary>

After installation, try these commands to get started quickly:

1. **Catch your first Veramon**
   ```
   /explore
   ```
   When a Veramon appears, use:
   ```
   /catch
   ```

2. **View your collection**
   ```
   /collection
   ```

3. **Start a PvE battle**
   ```
   /battle_pve easy
   ```

4. **Check available commands**
   ```
   /help
   ```

5. **Join a faction**
   ```
   /faction_join
   ```
</details>

<details>
<summary><h3> Configuration Examples</h3></summary>

#### Basic Server Setup

```
/admin_config spawn_rate 15
/admin_config pve_rewards medium
/admin_config default_channel #veramon-catches
```

#### Advanced Battle Configuration

```
/admin_config battle_timeout 120
/admin_config battle_rewards high
/admin_config battle_ranking true
```

#### Economy Settings

```
/admin_config starting_tokens 500
/admin_config catch_reward 25
/admin_config shop_refresh 12
```
</details>

<details>
<summary><h3> Sample Workflows</h3></summary>

#### Trading Workflow

1. Initiate a trade
   ```
   /trade_create @UserName
   ```

2. Add a Veramon to the trade
   ```
   /trade_add veramon FlameRex
   ```

3. Confirm the trade
   ```
   /trade_confirm
   ```

4. Wait for the other user to confirm
   
5. Trade completes automatically once both users confirm

#### Battle Tournament Setup

1. Create a tournament
   ```
   /tournament_create name:Weekly Showdown format:single_elimination
   ```

2. Set tournament options
   ```
   /tournament_options max_participants:16 level_cap:50
   ```

3. Open registrations
   ```
   /tournament_open
   ```

4. Start the tournament
   ```
   /tournament_start
   ```
</details>

</details>

---

<details>
<summary><h2> ğŸ—ï¸ Project Structure</h2></summary>

This section provides an overview of the Veramon Reunited project structure and organization.

<details>
<summary><h3> Directory Structure</h3></summary>

```
veramon_reunited/
â”œâ”€â”€ data/                   # Game data files (Veramon database, items, etc.)
â”œâ”€â”€ src/                    # Source code
â”‚   â”œâ”€â”€ assets/             # Static assets (images, sounds, etc.)
â”‚   â”œâ”€â”€ cogs/               # Discord bot command groups
â”‚   â”‚   â”œâ”€â”€ admin/          # Administrative commands
â”‚   â”‚   â”œâ”€â”€ economy/        # Economy and trading commands
â”‚   â”‚   â”œâ”€â”€ gameplay/       # Core gameplay commands
â”‚   â”‚   â””â”€â”€ ...             # Other command categories
â”‚   â”œâ”€â”€ core/               # Core bot functionality
â”‚   â”œâ”€â”€ data/               # Data loading and management
â”‚   â”œâ”€â”€ db/                 # Database operations
â”‚   â”œâ”€â”€ defaults/           # Default configuration
â”‚   â”œâ”€â”€ models/             # Data models and business logic
â”‚   â”œâ”€â”€ tools/              # Testing and maintenance tools
â”‚   â”œâ”€â”€ ui/                 # Legacy UI components
â”‚   â”œâ”€â”€ utils/              # Utility functions
â”‚   â”‚   â””â”€â”€ ui/             # UI components
â”‚   â””â”€â”€ main.py             # Bot entry point
â”œâ”€â”€ tests/                  # Test suite
â”œâ”€â”€ .env.sample             # Environment variable template
â”œâ”€â”€ CHANGELOG.md            # Version history
â”œâ”€â”€ LICENSE                 # License information
â”œâ”€â”€ OWNERSHIP.md            # Project ownership details
â”œâ”€â”€ README.md               # Project documentation
â””â”€â”€ requirements.txt        # Python dependencies
```
</details>

<details>
<summary><h3> Database Structure</h3></summary>

The Veramon bot uses SQLite for data storage with these key tables:

#### Core Tables
- **users** - Player profiles and statistics
- **captures** - Veramon ownership and individual data
- **items** - Player inventory items

#### Battle System
- **battles** - Battle records and metadata
- **battle_participants** - Players/NPCs in battles
- **battle_veramon** - Veramon details for battles
- **battle_logs** - Turn-by-turn battle records

#### Trading System
- **trades** - Trade records and status
- **trade_items** - Items included in trades

#### World & Economy
- **factions** - Faction data and standings
- **faction_members** - Player faction membership
- **shop_items** - Available shop inventory

The database uses optimized indices for:
- `captures.user_id` - Fast collection lookup
- `battles.status` - Quick filtering of active battles
- `trades.status` - Efficient trade status checks
- `battle_participants.battle_id` - Fast battle participant lookup

Data integrity is maintained through foreign key constraints and transaction-based operations.
</details>

<details>
<summary><h3> Architectural Overview</h3></summary>

Veramon Reunited follows a layered architecture:

1. **Discord Integration Layer**
   - **Cogs**: Command handling and Discord interactions
   - **Event Handlers**: Discord event processing
   - **UI Components**: Interactive Discord UI elements

2. **Business Logic Layer**
   - **Models**: Core game mechanics and data structures 
   - **Services**: Cross-cutting operations and orchestration
   - **Managers**: State management for long-running processes

3. **Data Access Layer**
   - **Database Managers**: Abstraction over direct SQL
   - **Data Loaders**: Efficient data retrieval and caching
   - **Persistence Logic**: Save and load operations

4. **Infrastructure Layer**
   - **Configuration**: Environment and server settings
   - **Logging**: Application monitoring
   - **Performance Metrics**: System performance tracking

#### System Interactions

```
Discord Commands â†’ Cogs â†’ Models â†’ Database Managers â†’ Database
     â†‘               |       â†‘           |
     â””â”€â”€â”€ UI Components â†â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

The architecture supports:
- **Separation of Concerns**: Each component has distinct responsibilities
- **Testability**: Components can be tested in isolation
- **Extensibility**: New features can be added with minimal changes to existing code
- **Performance**: Critical paths are optimized with caching and efficient database access
</details>

<details>
<summary><h3> Key Components</h3></summary>

#### Battle System

The battle system is implemented across multiple files:
- **Models**: `src/models/battle.py`, `src/models/battle_actor.py`, `src/models/battle_mechanics.py`
- **UI**: `src/utils/ui/battle_ui.py`, `src/utils/ui/battle_ui_enhanced.py`, `src/utils/ui/battle_ui_integration.py`
- **Cogs**: `src/cogs/gameplay/battle_cog.py`

#### Trading System

The trading system is implemented across:
- **Models**: `src/models/trade.py`
- **UI**: `src/utils/ui/trade_ui.py`, `src/utils/ui/trading_ui_enhanced.py`, `src/utils/ui/trading_ui_integration.py`
- **Cogs**: `src/cogs/economy/trading_cog.py`

#### Core Game Data

Veramon data and game mechanics are defined in:
- **Veramon Definitions**: `data/veramon_database.json`
- **Models**: `src/models/veramon.py`
- **Data Loading**: `src/utils/data_loader.py`, `src/utils/cache.py`
</details>

</details>

---

<details>
<summary><h2> ğŸ“š Developer Guide</h2></summary>

<details>
<summary><h3> Project Structure</h3></summary>

The Veramon Reunited codebase is organized for maintainability and separation of concerns:

```
veramon_reunited/
â”œâ”€â”€ README.md             # Project documentation
â”œâ”€â”€ main.py               # Bot entry point
â”œâ”€â”€ src/                  # Source code
â”‚   â”œâ”€â”€ bot.py            # Core Discord bot configuration
â”‚   â”œâ”€â”€ cogs/             # Discord command modules 
â”‚   â”‚   â”œâ”€â”€ admin/        # Administrative commands
â”‚   â”‚   â”œâ”€â”€ gameplay/     # Core gameplay commands
â”‚   â”‚   â””â”€â”€ social/       # Community interaction commands
â”‚   â”œâ”€â”€ models/           # Data models
â”‚   â”‚   â”œâ”€â”€ battle.py     # Battle mechanics
â”‚   â”‚   â”œâ”€â”€ battle_actor.py # Actor-based battle implementation
â”‚   â”‚   â”œâ”€â”€ battle_manager.py # Battle actor management
â”‚   â”‚   â”œâ”€â”€ permissions.py # Permission system
â”‚   â”‚   â””â”€â”€ veramon.py    # Creature system
â”‚   â”œâ”€â”€ utils/            # Utility functions
â”‚   â”‚   â”œâ”€â”€ actor_system.py # Actor-based architecture
â”‚   â”‚   â”œâ”€â”€ battle_metrics.py # Battle performance tracking
â”‚   â”‚   â”œâ”€â”€ cache_manager.py # Caching mechanisms
â”‚   â”‚   â”œâ”€â”€ data_loader.py # JSON data loading
â”‚   â”‚   â”œâ”€â”€ performance_monitor.py # System metrics
â”‚   â”‚   â””â”€â”€ ui_helpers.py # Discord UI utilities
â”‚   â””â”€â”€ db/               # Database management
â”‚       â”œâ”€â”€ db.py         # Database connection
â”‚       â”œâ”€â”€ schema.py     # Schema definition
â”‚       â””â”€â”€ cache_manager.py # Query caching
â””â”€â”€ data/                 # Game data (JSON)
    â”œâ”€â”€ veramon/          # Creature definitions
    â”œâ”€â”€ moves/            # Ability definitions
    â””â”€â”€ items/            # Item definitions
```

</details>

<details>
<summary><h3> Key Technologies</h3></summary>

| Technology | Purpose |
|------------|---------|
| **discord.py** | Python library for Discord API interaction |
| **Discord UI Components** | Buttons, selects, and modals for interactive gameplay |
| **SQLite** | Local database storage for user data and game state |
| **JSON** | Data storage for game assets |
| **Actor System** | Battle state management architecture |
| **python-dotenv** | Environment variable management |
| **SQLAlchemy** | ORM for database interactions |

</details>

<details>
<summary><h3> Core Systems</h3></summary>

#### Discord Integration

The bot is built entirely around Discord's interface capabilities:

- **Slash Commands** - All user interactions start with / commands
- **Button Interactions** - Battle controls, team management, and navigation
- **Embeds** - Rich visual displays for battles, profiles, and game information
- **Ephemeral Messages** - Private responses for sensitive information
- **Component Interactions** - Selection menus, modals for user input

#### Actor-Based Architecture

The battle system utilizes an actor-based architecture, providing:

- **Isolation** - Each battle runs in its own isolated context
- **Persistence** - Battles persist through bot restarts
- **Discord Compatibility** - Designed to handle Discord's interaction timeouts
- **Resilience** - Error handling and graceful recovery

```python
# Example of Discord command calling the actor system
@app_commands.command(name="battle_move", description="Execute a move in battle")
async def battle_move(self, interaction: discord.Interaction, move_name: str):
    # Defer the response to avoid Discord timeout
    await interaction.response.defer(ephemeral=True)
    
    battle_id = self.get_user_battle(str(interaction.user.id))
    if not battle_id:
        return await interaction.followup.send("You're not in a battle!")
    
    # Get the battle actor through the manager
    battle_ref = self.battle_manager.get_battle(battle_id)
    
    # Send a message to the actor and await response
    result = await battle_ref.ask({
        "action": "execute_move",
        "user_id": str(interaction.user.id),
        "move_name": move_name
    })
    
    # Send the result back to Discord
    await interaction.followup.send(result["message"])
```

#### Battle Metrics and Performance

The system includes comprehensive performance monitoring for Discord interactions:

- **Query Timing** - Database operation tracking
- **Battle Performance** - Metrics on battle duration and complexity
- **User Response Time** - Tracking interaction responsiveness
- **Caching System** - Efficient data retrieval for common operations
- **Automated Optimization** - Background tasks to maintain performance

</details>

<details>
<summary><h3> Testing</h3></summary>

#### Running Tests

```bash
# Run all tests
python -m unittest discover tests

# Run specific test module
python -m unittest tests.test_battle_system
```

#### Test Coverage

- **Unit Tests** - Core game mechanics and calculations
- **Integration Tests** - Database operations and state management
- **Mock Testing** - Discord API interactions with simulated responses
- **Performance Testing** - Load testing for multi-battle scenarios

</details>

</details>

---

<details>
<summary><h2> ğŸ¤ Contributing</h2></summary>

<details>
<summary><h3> How to Contribute</h3></summary>

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

</details>

<details>
<summary><h3> Contribution Guidelines</h3></summary>

- Follow the existing code style and conventions
- Write clear, descriptive commit messages
- Include tests for new features
- Update documentation for changes
- Keep PRs focused on a single feature or bug fix

</details>

<details>
<summary><h3> Code Review Process</h3></summary>

1. All PRs require review from at least one maintainer
2. Automated tests must pass
3. Documentation must be updated if needed
4. Changes should maintain or improve code quality

</details>

</details>

---

<details>
<summary><h2> ğŸ‘¥ Contributors</h2></summary>

- **killerdash117** - Project founder and lead developer
- **Darkrell** - Tester and server provider

</details>

---

<div align="center">

## ğŸ“Š Project Status

![Version](https://img.shields.io/badge/version-v0.33.000-brightgreen.svg)
![Last Updated](https://img.shields.io/badge/last%20updated-April%2021%2C%202025-blue.svg)
![Discord](https://img.shields.io/discord/XXXXXX?label=discord&logo=discord&logoColor=white)

### [Join Our Discord](https://discord.gg/veramon) | [Report Bugs](https://github.com/killerdash117/veramon-reunited/issues) | [Request Features](https://github.com/killerdash117/veramon-reunited/issues)

</div>

---

<details>
<summary><h2> ğŸ› ï¸ Troubleshooting</h2></summary>

<details>
<summary><h3> Common Issues</h3></summary>

#### Bot Not Responding
- Ensure your bot token is correct in .env
- Check Discord connection status
- Verify the bot has proper permissions in your server

#### Database Errors
- Run `python src/tools/fix_database_indices.py` to repair database
- Ensure SQLite is properly installed
- Check write permissions in the data directory

#### Battle System Problems
- Install required dependency: `pip install psutil`
- Check battle logs for errors: `/admin_logs battle_system`
- Restart battle service: `/admin_service restart battle_system`

#### Missing Veramon Data
- Run `python src/tools/fix_data_structure.py` to repair Veramon data
- Verify data files exist in the data directory
- Check JSON formatting in Veramon database files
</details>

<details>
<summary><h3> Error Codes</h3></summary>

| Code | Description | Solution |
|------|-------------|----------|
| E001 | Discord API Rate Limit | Wait a few minutes before trying again |
| E002 | Database Connection Failed | Check database file permissions |
| E003 | Veramon Data Missing | Run `python src/tools/fix_data_structure.py` |
| E004 | Battle System Error | Install psutil and restart the bot |
| E005 | Trading System Error | Check database indices and connectivity |
| E006 | Permission Error | Ensure bot has proper Discord permissions |
</details>

<details>
<summary><h3> Getting Help</h3></summary>

If you encounter issues not covered here:

1. Check the [Issues page](https://github.com/killerdash117/veramon-reunited/issues) for similar problems
2. Run `/debug_info` to generate a diagnostic report
3. Join our [Discord server](https://discord.gg/veramon) for community support
4. Open a new issue with detailed information about the problem
</details>

</details>

---
